<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Extending Paul Irish's body-class IE CSS override technique with JavaScript</title>
    <meta name="viewport" content="width=device-width">

    <link rel="shortcut icon" href="/favicon.ico?v=3"/>
    <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png"/>
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/images/apple-touch-icon-57x57.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/images/apple-touch-icon-72x72.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/images/apple-touch-icon-114x114.png"/>
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/images/apple-touch-icon-144x144.png"/>
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/images/apple-touch-icon-60x60.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/images/apple-touch-icon-120x120.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/images/apple-touch-icon-76x76.png"/>
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/images/apple-touch-icon-152x152.png"/>

    
    <link rel="stylesheet" href="/css/syntax.css">
    <link rel="stylesheet" href="/css/main.css">

    <script type="text/javascript" src="/js/modernizr.custom.15501.js"></script>
    <script type="text/javascript" src="/js/picturefill_matchmedia.js"></script>
    <script type="text/javascript" src="//use.typekit.net/sje1dhr.js"></script>
    <script type="text/javascript">
      try {
        Typekit.load({
          active: function () {
          }
        })
      } catch (e) {
        console.log(e);
      }
    </script>
    
  </head>
  <body>
    <div id="topStripe" class="stripe"></div>

    <header class="tk-omnes-pro">
      <div class="container">

        <h1>John Starr Dewar</h1>

        <div id="pic">
        </div>
        <div id="nav">
          <a href="/about">About</a>
          <a href="/">Posts</a>
          <a href="http://www.123contactform.com/form-724791/Email-Me">Email</a>
          <a href="/follow">Follow</a>
        </div>
      </div>

    </header>

    <div id="topMargin" class="margin"></div>


    <div id="main" class="container">

      <div class="site tk-freight-sans-pro">
        <div id="home">
  <h2>Extending Paul Irish's body-class IE CSS override technique with JavaScript</h2>

  <div class="list-date">27 Sep 2012</div>
</div>

<div class="post">
  <p>I think as web developers we&#39;re all pretty familiar with this block of code, or something like it:</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">media=</span><span class="s">&quot;screen&quot;</span> <span class="na">href=</span><span class="s">&quot;css/style.css&quot;</span> <span class="nt">/&gt;</span>
<span class="c">&lt;!--[if IE 8]&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;screen&quot; href=&quot;css/ie8.css&quot;  /&gt;&lt; ![endif]--&gt;</span>
<span class="c">&lt;!--[if IE 7]&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;screen&quot; href=&quot;css/ie7.css&quot;  /&gt;&lt; ![endif]--&gt;</span>
<span class="c">&lt;!--[if IE 6]&gt;&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;screen&quot; href=&quot;css/ie6.css&quot;  /&gt;&lt; ![endif]--&gt;</span>
</code></pre></div>
<p>When I see this I get depressed.  It just feels like so much work to keep all the overridden classes straight, especially with the oldIE&#39;s terrible dev tools.  Paul Irish and HTML5 Boilerplate have since popularized a <a href="http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/">technique that I greatly prefer</a>: rather than having the overridden styles in a separate stylesheet, you can place them right below the original declaration.  It requires a lot less mental overhead to keep track of your overrides this way.</p>

<p>Here&#39;s what the code block above looks like in HTML5 Boilerplate:</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="c">&lt;!--[if lt IE 7]&gt;      &lt;html class=&quot;no-js lt-ie9 lt-ie8 lt-ie7&quot;&gt; &lt;![endif]--&gt;</span>
<span class="c">&lt;!--[if IE 7]&gt;         &lt;html class=&quot;no-js lt-ie9 lt-ie8&quot;&gt; &lt;![endif]--&gt;</span>
<span class="c">&lt;!--[if IE 8]&gt;         &lt;html class=&quot;no-js lt-ie9&quot;&gt; &lt;![endif]--&gt;</span>
<span class="c">&lt;!--[if gt IE 8]&gt;&lt;!--&gt;</span> <span class="nt">&lt;html</span> <span class="na">class=</span><span class="s">&quot;no-js&quot;</span><span class="nt">&gt;</span> <span class="c">&lt;!--&lt;![endif]--&gt;</span>
</code></pre></div>
<p>Here&#39;s how it&#39;s used on this site:</p>
<div class="highlight"><pre><code class="css language-css" data-lang="css"><span class="nc">.lt-ie9</span> <span class="nt">body</span> <span class="o">&gt;</span> <span class="nt">header</span> <span class="nt">h1</span> <span class="p">{</span>
  <span class="k">font-family</span><span class="o">:</span> <span class="s2">&quot;Open Sans&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.lt-ie9</span> <span class="nt">aside</span><span class="nc">.sidebar</span> <span class="p">{</span>
  <span class="k">padding-left</span><span class="o">:</span> <span class="m">40px</span><span class="p">;</span>
  <span class="k">width</span><span class="o">:</span> <span class="m">240px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.lt-ie9</span> <span class="nt">body</span> <span class="o">&gt;</span> <span class="nt">nav</span> <span class="p">{</span>
  <span class="k">padding-right</span><span class="o">:</span> <span class="m">24px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>You can also use this technique with JavaScript to do a lot of useful things.  I&#39;ve found a few which I&#39;ll share with you.</p>

<p>Now were you wondering about <code>no-js</code>?  This is a simple example of using JavaScript to control overrides.  The Modernizr library, very common on the web these days, provides this to give you a way of styling your page especially for people who have disabled JavaScript.  When Modernizr loads, it will remove the <code>no-js</code> class.  You could use this knowledge to show a message telling your users that JavaScript isn&#39;t optional on your site, for example, using only css.</p>

<p>What else can we do?  Well a problem I have run into while developing responsive web sites is that many Android phones won&#39;t trigger the mobile layout.  The problem varies from phone to phone but I think it&#39;s generally caused by the phone attempting to masquerade as a much larger screen than it actually is.  For example, a certain HTC phone was reporting its screen size as 1280x720, so my media query was ignoring it.  Result?  The menu was too small to be usable.  The solution?  Fall back on <a href="http://detectmobilebrowser.com/">user-agent detection</a>.  However, I still wanted to keep the CSS simple and not build out a separate css file for mobile, so I used the UA detection to add a <code>mobile</code> class to the html tag:</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="c1">// Using jQuery version of script from http://detectmobilebrowser.com</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">browser</span><span class="p">.</span><span class="nx">mobile</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;mobile&#39;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="css language-css" data-lang="css"><span class="nf">#menu</span> <span class="p">{</span>
  <span class="k">font-size</span><span class="o">:</span> <span class="m">1em</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.mobile</span> <span class="nf">#menu</span> <span class="p">{</span>
  <span class="k">font-size</span><span class="o">:</span> <span class="m">2em</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Another useful idea I had was to create an override to support retina displays.  Detecting a retina display with JavaScript is easy!</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">devicePixelRatio</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;retina&#39;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="css language-css" data-lang="css"><span class="nf">#profile</span> <span class="p">{</span>
  <span class="k">background-image</span><span class="o">:</span> <span class="sx">url(profile_1x.jpg)</span><span class="p">;</span>
  <span class="k">background</span><span class="o">-</span><span class="k">size</span><span class="o">:</span> <span class="m">50px</span> <span class="m">50px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.retina</span> <span class="nf">#profile</span> <span class="p">{</span>
  <span class="k">background-image</span><span class="o">:</span> <span class="sx">url(profile_2x.jpg)</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>I was worried that the browser would try to load all the 1x assets before trying to load the 2x assets, but I found that the JS ran fast enough to outpace the browser, and it only attempted to load the 2x assets.  So this is a pretty elegant solution, in my book.</p>

<p>As an aside, in iOS 6, there&#39;s a new webkit prefix that does retina detection for you: <code>-webkit-image-set(url(img_1x.png) 1x, url(img_2x.jpg) 2x)</code></p>

<p>Since only Apple products currently have retina displays, this might work in the near term, but with Windows 8 support for 2x resolution screens, and the new Nook HD having a retina resolution, those days are numbered.</p>

<p>I hope that this inspires you!  It seems the possibilities are endless, and using overrides hopefully keeps your css nice and readable.</p>

</div>
<div id="share">
  <a href="https://twitter.com/share" class="twitter-share-button" data-via="jstarrdewar" data-size="large"
     data-count="none">Tweet</a>

  <div style="float:right">
    <div class="g-plusone" data-annotation="none"></div>

  </div>
</div>


<div id="disqus_thread"></div>

<script type="text/javascript">
  var disqus_shortname = 'jstarrdewar-blog';
  var disqus_identifier = '/blog/2012/09/27/extending-paul-irishs-body-class-ie-css-override-technique-with-javascript/';
  var disqus_url = 'http://jstarrdewar.com/blog/2012/09/27/extending-paul-irishs-body-class-ie-css-override-technique-with-javascript/';

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<!-- Place this tag after the last +1 button tag. -->
<script type="text/javascript">
  (function () {
    var po = document.createElement('script');
    po.type = 'text/javascript';
    po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(po, s);
  })();
</script>

<script>!function (d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https';
  if (!d.getElementById(id)) {
    js = d.createElement(s);
    js.id = id;
    js.src = p + '://platform.twitter.com/widgets.js';
    fjs.parentNode.insertBefore(js, fjs);
  }
}(document, 'script', 'twitter-wjs');</script>
      </div>
    </div>
    <div id="bottomMargin" class="margin"></div>
    <div id="bottomStripe" class="stripe"></div>
    <script type="text/javascript">
      var topStripe = document.getElementById("bottomStripe");
      var topMargin = document.getElementById("bottomMargin");
      var mainContent = document.getElementById("main");
      var bottomStripe = document.getElementById("bottomStripe");
      var bottomMargin = document.getElementById("bottomMargin");

      var decorationHeight = topStripe.offsetHeight + topMargin.offsetHeight + bottomStripe.offsetHeight;
      var bottomMarginHeight = bottomMargin.offsetHeight;

      var seconds = 0;

      function checkHeight() {
        setTimeout(function () {
          var totalHeight = decorationHeight + mainContent.offsetHeight;

          if (totalHeight + bottomMarginHeight < window.innerHeight) {
            if (window.innerHeight - totalHeight < 0) {
              bottomMargin.style.height = "2rem";
            } else {
              bottomMargin.style.height = (window.innerHeight - totalHeight) + "px";

            }
          }
          if (seconds < 30) {
            seconds++;
            checkHeight();
          }
        }, 1000);
      }
      checkHeight();


    </script>
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-8569918-1']);
      _gaq.push(['_trackPageview']);

      (function () {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
      })();

    </script>

  </body>
</html>
